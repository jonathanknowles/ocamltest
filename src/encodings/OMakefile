# Targets not related to filenames.
.PHONY: clean

# The generated, OMake-related files.
# (Cannot delete the .omakedb from within omake. Probably better to hide these
#  files from hg/git, rather than deleting them.)
OMAKE_GENERATED=*.{omc} .omakedb .omakedb.lock

# The generated, OCaml-related files.
OCAML_GENERATED=*.{a,cmi,cmx,cmxa,o,opt}

# All generated files (used for the 'clean' target).
GENERATED=$(OCAML_GENERATED) # $(OMAKE_GENERATED)

# Process OMakefile(s) in the following sub-directories.
# (Note: a phony target in this file (above .SUBDIRS) automatically depends on
#  the same-named targets in the mentioned sub-directories.)
.SUBDIRS: test

# The ml and mli files required to build the library.
FILES[] = encodings encodings_private

# The meta name of the library.
LIB_NAME = encodings

# The instructions to build the library file(s).
# (LIB = the resulting filename(s))
LIB_FILES = $(OCamlLibrary $(LIB_NAME), $(FILES))

# Build library by default.
.DEFAULT: $(LIB_FILES)

# Clean the library and other intermediate files.
clean:
  rm -f $(LIB_FILES) $(GENERATED)