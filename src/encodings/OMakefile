# targets not related to filenames
.PHONY: clean

# omake-related generated files
# (cannot delete the .omakedb from within omake. probably
#  better to hide these files from hg/git, rather than
#  deleting them)
OMAKE_GENERATED=*.{omc} .omakedb .omakedb.lock

# ocaml-related generated files
OCAML_GENERATED=*.{a,cmi,cmx,cmxa,o,opt}

# all generated files (used for 'clean')
GENERATED=$(OCAML_GENERATED) # $(OMAKE_GENERATED)

# process OMakefile(s) in the following sub-directories
# (note: a phony target in this file depends on the
#  same-named targets in the sub-directories)
.SUBDIRS: test

# ml and mli files required to build the library
FILES[] = encodings encodings_private

# the meta name of the library
LIB_NAME = encodings

# the instructions to build the library file(s)
# (LIB = the resulting filename(s))
LIB_FILES = $(OCamlLibrary $(LIB_NAME), $(FILES))

# build library by default
.DEFAULT: $(LIB_FILES)

# clean the library and other intermediate files
clean:
  rm -f $(LIB_FILES) $(GENERATED)